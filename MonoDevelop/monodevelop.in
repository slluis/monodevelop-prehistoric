#!/bin/bash

if test -n "$MOZILLA_FIVE_HOME"; then
	MOZILLA_HOME=$MOZILLA_FIVE_HOME
elif [ -f @MOZILLA_HOME@/chrome/comm.jar ]; then
        MOZILLA_HOME=@MOZILLA_HOME@
elif cat `which mozilla` | grep MOZILLA_FIVE_HOME=; then
	MOZILLA_HOME=$(cat $(which mozilla) | grep MOZILLA_FIVE_HOME= | cut -d '"' -f 2)
else
	echo "Cannot find mozilla installation directory. Please set MOZILLA_FIVE_HOME to your mozilla directory"
	exit 1
fi
 
MD_BIN_PATH=@prefix@/lib/monodevelop/bin

LD_LIBRARY_PATH=$MOZILLA_HOME:$MD_BIN_PATH:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH
 
MOZILLA_FIVE_HOME=$MOZILLA_HOME
export MOZILLA_FIVE_HOME

cd $MD_BIN_PATH

case x$1 in
    x--profile)
    mono --profile ./MonoDevelop.exe $@
	exit 0
    ;;
    x--debug)
    mono --debug ./MonoDevelop.exe $@
	exit 0
    ;;
	x--trace)
    mono --trace ./MonoDevelop.exe $@
	exit 0;
	;;
esac

# should not use --debug when we are more stable
mono --debug ./MonoDevelop.exe $@

